<div *ngIf="loading" class="text-center py-10">Loading invoice...</div>

<div *ngIf="error" class="text-red-600 text-center py-4">{{ error }}</div>

<div *ngIf="invoice" class="max-w-3xl mx-auto mt-8 p-6 bg-white border shadow rounded-lg space-y-5">
  <h2 class="text-2xl font-semibold text-gray-800">Invoice #{{ invoice.id }}</h2>

  <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm text-gray-700">
    <div><strong>Booking ID:</strong> {{ invoice.bookingId }}</div>
    <div><strong>Status:</strong> {{ invoice.serviceStatus }}</div>
    <div><strong>Date:</strong> {{ invoice.slotDateTime | date: 'mediumDate' }}</div>
    <div><strong>Time:</strong> {{ invoice.slotDateTime | date: 'shortTime' }}</div>
    <div><strong>Mechanic:</strong> {{ invoice.mechanicName }}</div>
    <div><strong>Vehicle:</strong> {{ invoice.registrationNumber }}</div>
    <div><strong>Service Details:</strong> {{ invoice.serviceDetails }}</div>
    <div><strong>Amount:</strong>
      <ng-container *ngIf="invoice.discountFlag && discountedAmount !== null; else noDiscount">
        <span class="line-through text-gray-400">₹{{ invoice.amount }}</span>
        <span class="text-green-700 font-semibold ml-2">₹{{ discountedAmount }}</span>
        <span class="ml-1 text-xs text-green-600">({{ invoice.discountPercentage }}% off)</span>
      </ng-container>
      <ng-template #noDiscount>
        ₹{{ invoice.amount }}
      </ng-template>
    </div>
  </div>

  <hr class="my-4" />

  <div class="text-sm text-gray-700">
    <strong>Customer:</strong> {{ invoice.name }}<br />
    {{ invoice.email }}<br />
    {{ invoice.phone }}
  </div>

  <div class="text-right mt-4">
    <button
      class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"
      (click)="downloadPDF()"
    >
      Download PDF
    </button>
  </div>
</div>
