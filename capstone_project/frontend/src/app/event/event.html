<div class="container py-4">
  <!-- Back Arrow -->
  <div class="mb-3">
    <button class="btn btn-outline-secondary d-flex align-items-center" (click)="gotohome()">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left-circle mx-1"
        viewBox="0 0 16 16">
        <path fill-rule="evenodd"
          d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8m15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-4.5-.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5z" />
      </svg>
      <div>
        Back

      </div>
    </button>
  </div>

  <div class="row justify-content-center">
    <div class="col-lg-10">
      <div class="card shadow-sm border-0 p-3">
        <div class="row g-4">

          <!-- Left Half -->
          <div class="col-md-6">
            <img [src]="event.imageurl"
              class="img-fluid rounded w-100" alt="{{ event.title }}" style="object-fit: cover; max-height: 300px;" />

            <div class="mt-3">
              <h3 class="text-danger">{{ event.title }}</h3>
              <p class="text-muted mb-1">{{ event.description }}</p>
              <p class="fst-italic text-dark">{{ event.context }}</p>
            </div>
          </div>

          <!-- Right Half -->
          <div class="col-md-6 px-4 d-flex flex-column justify-content-between">
            <div>
              <h5 class="mb-3 d-flex justify-content-start align-items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                  class="bi bi-calendar" viewBox="0 0 16 16">
                  <path
                    d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5M1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4z" />
                </svg>
                <div>

                  {{ event.date | date: 'fullDate' }} at {{ event.date | date: 'shortTime' }}
                </div>
              </h5>

              <div class="mb-3">
                <strong>Location:</strong>
                <p class="mb-1">{{ event.address }}</p>
                <p class="text-muted">{{ event.city }}</p>
              </div>

              <div class="mb-3">
                <strong>Category:</strong>
                <p>
                  <span class="badge bg-success bg-opacity-75">
                    {{ event.category?.name || 'General' }}
                  </span>
                </p>
              </div>

              <div class="mb-3">
                <strong>Price:</strong>
                <p class="fs-5 fw-bold text-dark">₹{{ event.price }}</p>
              </div>



              <!-- Ticket Count -->
              <div class="mb-4">
                <strong>Number of Tickets:</strong>
                <div class="input-group mt-2" style="width: 160px;">
                  <button class="btn btn-outline-secondary" (click)="decrement()">-</button>
                  <input type="text" class="form-control text-center" [value]="count" readonly />
                  <button class="btn btn-outline-secondary" (click)="increment()">+</button>
                </div>
              </div>
            </div>

            <div>
              <p class=" text-danger text-muted-danger mb-1">Hurry up! {{ event.ticketcount }} Tickets left...</p>

            </div>

            <div class="alert alert-info border-0 shadow-sm mt-4">
              <h5 class="mb-3 d-flex flex-row align-items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                  class="bi bi-info-circle" viewBox="0 0 16 16">
                  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16" />
                  <path
                    d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0" />
                </svg>
                <div>
                  Important Note-
                </div>
              </h5>
              <ul class="list-group list-group-flush">
                <li class="list-group-item bg-transparent border-0 ps-0">
                  <i class="bi bi-clock me-2 text-secondary"></i>
                  Entry closes 30 minutes after start time.
                </li>
                <li class="list-group-item bg-transparent border-0 ps-0">
                  <i class="bi bi-cup-straw me-2 text-secondary"></i>
                  No outside food allowed.
                </li>
                <li class="list-group-item bg-transparent border-0 ps-0">
                  <i class="bi bi-person-badge me-2 text-secondary"></i>
                  Bring a valid ID.
                </li>
              </ul>
            </div>



            <!-- Book Button -->
            <button class="btn btn-danger btn-lg w-100 mt-3" (click)="bookNow()">
              <i class="bi bi-ticket-perforated-fill me-2"></i>Book Ticket
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>



<div *ngIf="similarEvents.length > 0" class="container mt-5 mb-5">
  <h4 class="mb-3">Similar Events</h4>
  <div class="overflow-auto pb-2" style="white-space: nowrap;">
    <div class="d-inline-block me-3" style="width: 250px;" *ngFor="let event of similarEvents">
      <div class="card h-100 shadow-sm">
        <img [src]="event.imageurl" class="card-img-top" style="height: 150px; object-fit: cover;" alt="..." />
        <div class="card-body d-flex flex-column justify-content-between">
          <!-- Title & Category -->
          <div class="d-flex justify-content-between align-items-start mb-2">
            <h6 class="card-title mb-0">{{ event.title }}</h6>
            <span class="badge bg-primary bg-opacity-75">{{ event.category?.name || 'General' }}</span>
          </div>

          <!-- Price & Book -->
          <div class="d-flex justify-content-between align-items-center mt-auto pt-2 border-top">
            <button (click)="handleBookNow(event.id)" class="btn btn-sm btn-outline-danger mt-2">
              Book Now
            </button>
            <p class="mt-2 mb-0 fw-semibold text-dark">₹{{ event.price }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>