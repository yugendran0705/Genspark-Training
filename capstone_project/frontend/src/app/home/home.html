<div class="container py-4">

    
    <section class="mb-4 z-10">
        <h4 class="text-center mb-3">ðŸ”¥ Top Trending Categories</h4>
        <p-carousel [value]="trendingCategories" [numVisible]="1" [numScroll]="1" [circular]="false">
            <ng-template let-category #item>
                <div class="border rounded p-4 text-center shadow-sm bg-light">
                    <h5 class="text-danger mb-2">{{ category.label }}</h5>
                    <p class="mt-3 fw-semibold text-dark">No. Events: {{ category.count }}</p>
                </div>
            </ng-template>
        </p-carousel>
    </section>


    <!-- Search Bar -->
    <section class="d-flex justify-content-center mb-4">
        <input type="text" class="form-control w-100 w-md-50" placeholder="Search events..." [(ngModel)]="searchText" />
    </section>

    
    <section class="row g-4">
        
        <div class="col-md-3">
            <div class="p-3 border rounded shadow-sm bg-light">
                <h5>Filters<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                        class="bi bi-filter m-1" viewBox="0 0 16 16">
                        <path
                            d="M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5m-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5m-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5" />
                    </svg></h5>

                
                <div class="mb-3">
                    <label class="form-label">Min Price</label>
                    <input type="number" class="form-control" [(ngModel)]="filters.minPrice" placeholder="e.g. 100" />
                </div>

                <!-- Max Price -->
                <div class="mb-3">
                    <label class="form-label">Max Price</label>
                    <input type="number" class="form-control" [(ngModel)]="filters.maxPrice" placeholder="e.g. 1000" />
                </div>
                <!-- Start Date -->
                <div class="mb-3">
                    <label class="form-label">Start Date</label>
                    <input type="date" class="form-control" [(ngModel)]="filters.startDate" />
                </div>

                <!-- End Date -->
                <div class="mb-3">
                    <label class="form-label">End Date</label>
                    <input type="date" class="form-control" [(ngModel)]="filters.endDate" />
                </div>

                <!-- Category Filter -->
                <div class="mb-3">
                    <label class="form-label">Category</label>
                    <select class="form-select" [(ngModel)]="filters.category">
                        <option value="">All</option>
                        <option *ngFor="let c of categories" [value]="c">{{ c }}</option>
                    </select>
                </div>

                <!-- Location Filter -->
                <div class="mb-3">
                    <label class="form-label">Location</label>
                    <select class="form-select" [(ngModel)]="filters.city">
                        <option value="">All</option>
                        <option *ngFor="let c of cities" [value]="c">{{ c }}</option>
                    </select>
                </div>


            </div>
        </div>


        <!-- Event Cards  -->
        <div class="col-md-9">
            <div class="event-scroll-container row g-3">
                <div class="col-md-4" *ngFor="let event of filteredEvents()">
                    <div class="card h-100">
                        <img class="rounded-top card-img-fixed" [src]="event.imageurl" alt="error" />
                        <div class="card-body d-flex flex-column justify-content-between">
                            <!-- Title & Category -->
                            <div class="d-flex justify-content-between align-items-start mb-3">
                                <h5 class="card-title mb-0 px-2">{{ event.title }}</h5>
                                <span class="badge bg-danger bg-opacity-50">{{ event.category.name }}</span>
                            </div>

                            <!-- Book & Price -->
                            <div class="d-flex justify-content-between align-items-center mt-auto pt-2 border-top">
                                <button (click)="handleBookNow(event.id)" class="btn btn-danger btn-sm mt-2">Book
                                    Now</button>
                                <p class="mt-2 mb-0 fw-semibold text-dark">â‚¹{{ event.price }}</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </section>


    <div class="w-100 d-flex justify-content-center align-items-center mt-5">
        <div
            class="bg-transparent w-75 rounded py-3 px-4 text-white d-flex flex-column flex-md-row justify-content-between align-items-center position-relative">
            <img class="z-n1 rounded"
                ngSrc="https://images.unsplash.com/photo-1595769816263-9b910be24d5f?w=900&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTB8fG1vdmllc3xlbnwwfHwwfHx8MA%3D%3D"
                fill>
            <!-- Left Section -->
            <div class="d-flex justify-content-center align-items-center mb-3 mb-md-0">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor"
                    class="bi bi-film mx-2" viewBox="0 0 16 16">
                    <path
                        d="M0 1a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1zm4 0v6h8V1zm8 8H4v6h8zM1 1v2h2V1zm2 3H1v2h2zM1 7v2h2V7zm2 3H1v2h2zm-2 3v2h2v-2zM15 1h-2v2h2zm-2 3v2h2V4zm2 3h-2v2h2zm-2 3v2h2v-2zm2 3h-2v2h2z" />
                </svg>
                <div class="fs-1 fs-md-1 text-center text-md-start">Book<span
                        class="text-danger fst-italic">Your</span>Show</div>
            </div>

            <!-- Right Section -->
            <div
                class="text-warning fs-3 fs-md-3 text-center text-md-end d-flex flex-column align-items-center align-items-md-end">
                <div>Anywhere at Anytime!</div>
                <div>Just with one</div>
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor"
                    class="bi bi-hand-index" viewBox="0 0 16 16">
                    <path
                        d="M6.75 1a.75.75 0 0 1 .75.75V8a.5.5 0 0 0 1 0V5.467l.086-.004c.317-.012.637-.008.816.027.134.027.294.096.448.182.077.042.15.147.15.314V8a.5.5 0 1 0 1 0V6.435l.106-.01c.316-.024.584-.01.708.04.118.046.3.207.486.43.081.096.15.19.2.259V8.5a.5.5 0 0 0 1 0v-1h.342a1 1 0 0 1 .995 1.1l-.271 2.715a2.5 2.5 0 0 1-.317.991l-1.395 2.442a.5.5 0 0 1-.434.252H6.035a.5.5 0 0 1-.416-.223l-1.433-2.15a1.5 1.5 0 0 1-.243-.666l-.345-3.105a.5.5 0 0 1 .399-.546L5 8.11V9a.5.5 0 0 0 1 0V1.75A.75.75 0 0 1 6.75 1M8.5 4.466V1.75a1.75 1.75 0 1 0-3.5 0v5.34l-1.2.24a1.5 1.5 0 0 0-1.196 1.636l.345 3.106a2.5 2.5 0 0 0 .405 1.11l1.433 2.15A1.5 1.5 0 0 0 6.035 16h6.385a1.5 1.5 0 0 0 1.302-.756l1.395-2.441a3.5 3.5 0 0 0 .444-1.389l.271-2.715a2 2 0 0 0-1.99-2.199h-.581a5 5 0 0 0-.195-.248c-.191-.229-.51-.568-.88-.716-.364-.146-.846-.132-1.158-.108l-.132.012a1.26 1.26 0 0 0-.56-.642 2.6 2.6 0 0 0-.738-.288c-.31-.062-.739-.058-1.05-.046zm2.094 2.025" />
                </svg>
            </div>
        </div>
    </div>



    <!-- Movies Section -->
    @if(Movies.length>0){
    <section class="mt-5">
        <h4 class="mb-3">Movies</h4>
        <div class="horizontal-scroll-container d-flex flex-nowrap overflow-auto">
            <div class="me-3" style="min-width: 300px;" *ngFor="let event of Movies">
                <div class="card h-100">
                    <img class="rounded-top card-img-fixed" [src]="event.imageurl" alt="error" />
                    <div class="card-body d-flex flex-column justify-content-between">
                        <!-- Title , Category -->
                        <div class="d-flex justify-content-between align-items-start mb-3">
                            <h5 class="card-title mb-0 px-2">{{ event.title }}</h5>
                            <span class="badge bg-danger bg-opacity-50">{{ event.category.name }}</span>
                        </div>
                        <!-- Book , Price -->
                        <div class="d-flex justify-content-between align-items-center mt-auto pt-2 border-top">
                            <button (click)="handleBookNow(event.id)" class="btn btn-danger btn-sm mt-2">Book
                                Now</button>
                            <p class="mt-2 mb-0 fw-semibold text-dark">â‚¹{{ event.price }}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    }

    <!-- Tech Section -->
    @if(techevents.length>0){
    <section class="mt-5">
        <h4 class="mb-3">Tech Events</h4>
        <div class="horizontal-scroll-container d-flex flex-nowrap overflow-auto">
            <div class="me-3" style="width: 300px;" *ngFor="let event of techevents">
                <div class="card h-100">
                    <img class="rounded-top card-img-fixed" [src]="event.imageurl" alt="error" />
                    <div class="card-body d-flex flex-column justify-content-between">
                        <!-- Title , Category -->
                        <div class="d-flex justify-content-between align-items-start mb-3">
                            <h5 class="card-title mb-0">{{ event.title }}</h5>
                            <span class="badge bg-danger bg-opacity-50">{{ event.category.name }}</span>
                        </div>
                        <!-- Book , Price -->
                        <div class="d-flex justify-content-between align-items-center mt-auto pt-2 border-top">
                            <button (click)="handleBookNow(event.id)" class="btn btn-danger btn-sm mt-2">Book
                                Now</button>
                            <p class="mt-2 mb-0 fw-semibold text-dark">â‚¹{{ event.price }}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    }

    @if(concerts.length>0){
    <section class="mt-5">
        <h4 class="mb-3">Concerts</h4>
        <div class="horizontal-scroll-container d-flex flex-nowrap overflow-auto">
            <div class="me-3" style="min-width: 300px; max-width: 300px;" *ngFor="let event of concerts">
                <div class="card h-100">
                    <img class="rounded-top card-img-fixed" [src]="event.imageurl" alt="error" />
                    <div class="card-body d-flex flex-column justify-content-between">
                        <!-- Title , Category -->
                        <div class="d-flex justify-content-between align-items-start mb-3">
                            <h5 class="card-title mb-0 px-2">{{ event.title }}</h5>
                            <span class="badge bg-danger bg-opacity-50 ">{{ event.category.name }}</span>
                        </div>
                        <!-- Book , Price -->
                        <div class="d-flex justify-content-between align-items-center mt-auto pt-2 border-top">
                            <button (click)="handleBookNow(event.id)" class="btn btn-danger btn-sm mt-2">Book
                                Now</button>
                            <p class="mt-2 mb-0 fw-semibold text-dark">â‚¹{{ event.price }}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    }



</div>