2025-07-21 15:25:52.170 +05:30 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-21 15:25:52.489 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2025-07-21 15:25:52.497 +05:30 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-21 15:25:52.499 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2025-07-21 15:25:52.500 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-21 15:25:52.505 +05:30 [INF] No migrations were applied. The database is already up to date.
2025-07-21 15:25:52.629 +05:30 [INF] User profile is available. Using '/Users/yugendransunder/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-07-21 15:25:52.716 +05:30 [INF] Now listening on: http://localhost:5136
2025-07-21 15:25:52.718 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 15:25:52.718 +05:30 [INF] Hosting environment: Development
2025-07-21 15:25:52.718 +05:30 [INF] Content root path: /Users/yugendransunder/Documents/Genspark-training/Genspark-Training/capstone_project/booking_system
2025-07-21 15:25:56.743 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5136/ - null null
2025-07-21 15:25:56.799 +05:30 [WRN] Failed to determine the https port for redirect.
2025-07-21 15:25:56.853 +05:30 [INF] HTTP GET / responded 404 in 0.6015 ms
2025-07-21 15:25:56.867 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5136/ - 404 0 null 126.3047ms
2025-07-21 15:25:56.872 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5136/, Response status code: 404
2025-07-21 15:26:01.830 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5136/swagger/v1/swagger.json - null null
2025-07-21 15:26:01.957 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5136/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 126.6072ms
2025-07-21 15:27:18.044 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5136/api/v1/Authentication - application/json 59
2025-07-21 15:27:18.047 +05:30 [INF] CORS policy execution failed.
2025-07-21 15:27:18.048 +05:30 [INF] Request origin http://localhost:5136 does not have permission to access the resource.
2025-07-21 15:27:18.051 +05:30 [INF] Executing endpoint 'AuthenticationController.UserLogin (booking_system)'
2025-07-21 15:27:18.066 +05:30 [INF] Route matched with {action = "UserLogin", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookingSystem.Models.DTOs.UserLoginResponse]] UserLogin(BookingSystem.Models.DTOs.UserLoginRequest) on controller AuthenticationController (booking_system).
2025-07-21 15:27:18.478 +05:30 [INF] Executed DbCommand (21ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Email", u."Name", u."Password", u."Role", u."WalletCustomerEmail"
FROM "Users" AS u
WHERE u."Email" = @__key_0
LIMIT 2
2025-07-21 15:27:18.892 +05:30 [INF] User admin@xyz.com logged in successfully
2025-07-21 15:27:18.898 +05:30 [INF] Executing OkObjectResult, writing value of type 'BookingSystem.Models.DTOs.UserLoginResponse'.
2025-07-21 15:27:18.908 +05:30 [INF] Executed action AuthenticationController.UserLogin (booking_system) in 839.4318ms
2025-07-21 15:27:18.909 +05:30 [INF] Executed endpoint 'AuthenticationController.UserLogin (booking_system)'
2025-07-21 15:27:18.910 +05:30 [INF] HTTP POST /api/v1/Authentication responded 200 in 859.1614 ms
2025-07-21 15:27:18.915 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5136/api/v1/Authentication - 200 null application/json; charset=utf-8 871.3444ms
2025-07-21 15:27:50.739 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5136/api/Events - null null
2025-07-21 15:27:50.787 +05:30 [INF] Executing endpoint 'BookingSystem.Controllers.EventsController.GetAllEvents (booking_system)'
2025-07-21 15:27:50.790 +05:30 [INF] Route matched with {action = "GetAllEvents", controller = "Events"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[BookingSystem.Models.Event]]] GetAllEvents() on controller BookingSystem.Controllers.EventsController (booking_system).
2025-07-21 15:27:50.919 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Address", e."CategoryId", e."City", e."Context", e."CreatorEmail", e."Date", e."Description", e."Imageurl", e."IsCancelled", e."Price", e."Ticketcount", e."Title", c."Id", c."Name"
FROM "Events" AS e
INNER JOIN "Categories" AS c ON e."CategoryId" = c."Id"
2025-07-21 15:27:50.984 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListWhereIterator`1[[BookingSystem.Models.Event, booking_system, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-21 15:27:51.002 +05:30 [INF] Executed action BookingSystem.Controllers.EventsController.GetAllEvents (booking_system) in 211.4141ms
2025-07-21 15:27:51.002 +05:30 [INF] Executed endpoint 'BookingSystem.Controllers.EventsController.GetAllEvents (booking_system)'
2025-07-21 15:27:51.002 +05:30 [INF] HTTP GET /api/Events responded 200 in 215.5955 ms
2025-07-21 15:27:51.003 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5136/api/Events - 200 null application/json; charset=utf-8 263.5524ms
2025-07-21 15:29:13.872 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5136/api/v1/Customer/register - application/json 154
2025-07-21 15:29:13.874 +05:30 [INF] CORS policy execution failed.
2025-07-21 15:29:13.874 +05:30 [INF] Request origin http://localhost:5136 does not have permission to access the resource.
2025-07-21 15:29:13.875 +05:30 [INF] Executing endpoint 'BookingSystem.Controllers.CustomerController.RegisterCustomer (booking_system)'
2025-07-21 15:29:13.894 +05:30 [INF] Route matched with {action = "RegisterCustomer", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookingSystem.Models.Customer]] RegisterCustomer(BookingSystem.Models.DTOs.CustomerDto) on controller BookingSystem.Controllers.CustomerController (booking_system).
2025-07-21 15:29:13.914 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Email", u."Name", u."Password", u."Role", u."WalletCustomerEmail"
FROM "Users" AS u
WHERE u."Email" = @__key_0
LIMIT 2
2025-07-21 15:29:14.283 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Email", "Name", "Password", "Role", "WalletCustomerEmail")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-21 15:29:14.321 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = Int32), @p3='?', @p4='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Customers" ("Email", "Address", "Id", "Name", "PhoneNumber")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-21 15:29:14.322 +05:30 [INF] Customer customer@xyz.com registered successfully
2025-07-21 15:29:14.323 +05:30 [INF] Executing CreatedAtActionResult, writing value of type 'BookingSystem.Models.Customer'.
2025-07-21 15:29:14.339 +05:30 [INF] Executed action BookingSystem.Controllers.CustomerController.RegisterCustomer (booking_system) in 444.0916ms
2025-07-21 15:29:14.339 +05:30 [INF] Executed endpoint 'BookingSystem.Controllers.CustomerController.RegisterCustomer (booking_system)'
2025-07-21 15:29:14.339 +05:30 [INF] HTTP POST /api/v1/Customer/register responded 201 in 464.1711 ms
2025-07-21 15:29:14.339 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5136/api/v1/Customer/register - 201 null application/json; charset=utf-8 467.4277ms
2025-07-21 15:30:20.722 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:5136/api/Wallet/add - application/json 47
2025-07-21 15:30:20.722 +05:30 [INF] CORS policy execution failed.
2025-07-21 15:30:20.723 +05:30 [INF] Request origin http://localhost:5136 does not have permission to access the resource.
2025-07-21 15:30:20.727 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Customer)
2025-07-21 15:30:20.729 +05:30 [INF] AuthenticationScheme: Bearer was forbidden.
2025-07-21 15:30:20.729 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:5136/api/Wallet/add - 403 0 null 7.3321ms
2025-07-21 15:30:39.963 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5136/api/v1/Authentication - application/json 62
2025-07-21 15:30:39.963 +05:30 [INF] CORS policy execution failed.
2025-07-21 15:30:39.964 +05:30 [INF] Request origin http://localhost:5136 does not have permission to access the resource.
2025-07-21 15:30:39.964 +05:30 [INF] Executing endpoint 'AuthenticationController.UserLogin (booking_system)'
2025-07-21 15:30:39.964 +05:30 [INF] Route matched with {action = "UserLogin", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookingSystem.Models.DTOs.UserLoginResponse]] UserLogin(BookingSystem.Models.DTOs.UserLoginRequest) on controller AuthenticationController (booking_system).
2025-07-21 15:30:39.967 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Email", u."Name", u."Password", u."Role", u."WalletCustomerEmail"
FROM "Users" AS u
WHERE u."Email" = @__key_0
LIMIT 2
2025-07-21 15:30:40.117 +05:30 [INF] User customer@xyz.com logged in successfully
2025-07-21 15:30:40.117 +05:30 [INF] Executing OkObjectResult, writing value of type 'BookingSystem.Models.DTOs.UserLoginResponse'.
2025-07-21 15:30:40.118 +05:30 [INF] Executed action AuthenticationController.UserLogin (booking_system) in 153.2473ms
2025-07-21 15:30:40.118 +05:30 [INF] Executed endpoint 'AuthenticationController.UserLogin (booking_system)'
2025-07-21 15:30:40.118 +05:30 [INF] HTTP POST /api/v1/Authentication responded 200 in 153.9309 ms
2025-07-21 15:30:40.118 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5136/api/v1/Authentication - 200 null application/json; charset=utf-8 154.9789ms
2025-07-21 15:31:11.307 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:5136/api/Wallet/add - application/json 50
2025-07-21 15:31:11.307 +05:30 [INF] CORS policy execution failed.
2025-07-21 15:31:11.308 +05:30 [INF] Request origin http://localhost:5136 does not have permission to access the resource.
2025-07-21 15:31:11.310 +05:30 [INF] Executing endpoint 'BookingSystem.Controllers.WalletController.AddFunds (booking_system)'
2025-07-21 15:31:11.313 +05:30 [INF] Route matched with {action = "AddFunds", controller = "Wallet"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookingSystem.Models.Wallet]] AddFunds(BookingSystem.Models.DTOs.WalletTransactionDto) on controller BookingSystem.Controllers.WalletController (booking_system).
2025-07-21 15:31:11.357 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT w."CustomerEmail", w."Id", w."LastUpdated", w.balance, c."Email", c."Address", c."Id", c."Name", c."PhoneNumber"
FROM "Wallets" AS w
INNER JOIN "Customers" AS c ON w."CustomerEmail" = c."Email"
WHERE w."CustomerEmail" = @__key_0
LIMIT 2
2025-07-21 15:31:11.358 +05:30 [ERR] Error adding funds to wallet for user ID: customer@xyz.com
System.Exception: Wallet not found for the provided CustomerEmail.
   at BookingSystem.Repositories.WalletRepository.Get(String key) in /Users/yugendransunder/Documents/Genspark-training/Genspark-Training/capstone_project/booking_system/Repositories/WalletRepository.cs:line 20
   at BookingSystem.Services.WalletService.GetWalletByEmail(String email) in /Users/yugendransunder/Documents/Genspark-training/Genspark-Training/capstone_project/booking_system/Services/WalletService.cs:line 22
   at BookingSystem.Services.WalletService.AddAmountToWallet(String email, Int32 amount) in /Users/yugendransunder/Documents/Genspark-training/Genspark-Training/capstone_project/booking_system/Services/WalletService.cs:line 34
   at BookingSystem.Controllers.WalletController.AddFunds(WalletTransactionDto dto) in /Users/yugendransunder/Documents/Genspark-training/Genspark-Training/capstone_project/booking_system/Controllers/WalletController.cs:line 47
2025-07-21 15:31:11.391 +05:30 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-07-21 15:31:11.391 +05:30 [INF] Executed action BookingSystem.Controllers.WalletController.AddFunds (booking_system) in 77.8031ms
2025-07-21 15:31:11.391 +05:30 [INF] Executed endpoint 'BookingSystem.Controllers.WalletController.AddFunds (booking_system)'
2025-07-21 15:31:11.391 +05:30 [ERR] HTTP PUT /api/Wallet/add responded 500 in 81.5137 ms
2025-07-21 15:31:11.391 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:5136/api/Wallet/add - 500 null text/plain; charset=utf-8 84.7794ms
2025-07-21 15:33:58.350 +05:30 [INF] Application is shutting down...
2025-07-21 15:34:12.589 +05:30 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-21 15:34:12.938 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2025-07-21 15:34:12.947 +05:30 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-21 15:34:12.948 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2025-07-21 15:34:12.949 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-21 15:34:12.952 +05:30 [INF] No migrations were applied. The database is already up to date.
2025-07-21 15:34:13.062 +05:30 [INF] User profile is available. Using '/Users/yugendransunder/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-07-21 15:34:13.130 +05:30 [INF] Now listening on: http://localhost:5136
2025-07-21 15:34:13.131 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 15:34:13.132 +05:30 [INF] Hosting environment: Development
2025-07-21 15:34:13.132 +05:30 [INF] Content root path: /Users/yugendransunder/Documents/Genspark-training/Genspark-Training/capstone_project/booking_system
2025-07-21 15:35:19.624 +05:30 [INF] Application is shutting down...
2025-07-21 15:35:29.638 +05:30 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-21 15:35:29.912 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2025-07-21 15:35:29.922 +05:30 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-21 15:35:29.923 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2025-07-21 15:35:29.923 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-21 15:35:29.927 +05:30 [INF] No migrations were applied. The database is already up to date.
2025-07-21 15:35:30.021 +05:30 [INF] User profile is available. Using '/Users/yugendransunder/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-07-21 15:35:30.082 +05:30 [INF] Now listening on: http://localhost:5136
2025-07-21 15:35:30.083 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 15:35:30.084 +05:30 [INF] Hosting environment: Development
2025-07-21 15:35:30.084 +05:30 [INF] Content root path: /Users/yugendransunder/Documents/Genspark-training/Genspark-Training/capstone_project/booking_system
2025-07-21 15:36:21.835 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5136/api/v1/Admin/register - application/json 106
2025-07-21 15:36:21.880 +05:30 [WRN] Failed to determine the https port for redirect.
2025-07-21 15:36:21.882 +05:30 [INF] CORS policy execution failed.
2025-07-21 15:36:21.882 +05:30 [INF] Request origin http://localhost:5136 does not have permission to access the resource.
2025-07-21 15:36:21.966 +05:30 [INF] Executing endpoint 'BookingSystem.Controllers.AdminController.RegisterAdmin (booking_system)'
2025-07-21 15:36:21.989 +05:30 [INF] Route matched with {action = "RegisterAdmin", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookingSystem.Models.Admin]] RegisterAdmin(BookingSystem.Models.DTOs.AdminDto) on controller BookingSystem.Controllers.AdminController (booking_system).
2025-07-21 15:36:22.411 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Email", u."Name", u."Password", u."Role", u."WalletCustomerEmail"
FROM "Users" AS u
WHERE u."Email" = @__key_0
LIMIT 2
2025-07-21 15:36:22.892 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Email", "Name", "Password", "Role", "WalletCustomerEmail")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-21 15:36:22.934 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Admins" ("Email", "Id", "Name", "PhoneNumber")
VALUES (@p0, @p1, @p2, @p3);
2025-07-21 15:36:22.944 +05:30 [INF] Executing CreatedAtActionResult, writing value of type 'BookingSystem.Models.Admin'.
2025-07-21 15:36:22.993 +05:30 [INF] Executed action BookingSystem.Controllers.AdminController.RegisterAdmin (booking_system) in 999.6863ms
2025-07-21 15:36:22.997 +05:30 [INF] Executed endpoint 'BookingSystem.Controllers.AdminController.RegisterAdmin (booking_system)'
2025-07-21 15:36:23.000 +05:30 [INF] HTTP POST /api/v1/Admin/register responded 201 in 1033.4345 ms
2025-07-21 15:36:23.009 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5136/api/v1/Admin/register - 201 null application/json; charset=utf-8 1176.2181ms
2025-07-21 15:36:38.149 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5136/api/v1/Authentication - application/json 59
2025-07-21 15:36:38.161 +05:30 [INF] CORS policy execution failed.
2025-07-21 15:36:38.162 +05:30 [INF] Request origin http://localhost:5136 does not have permission to access the resource.
2025-07-21 15:36:38.166 +05:30 [INF] Executing endpoint 'AuthenticationController.UserLogin (booking_system)'
2025-07-21 15:36:38.172 +05:30 [INF] Route matched with {action = "UserLogin", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookingSystem.Models.DTOs.UserLoginResponse]] UserLogin(BookingSystem.Models.DTOs.UserLoginRequest) on controller AuthenticationController (booking_system).
2025-07-21 15:36:38.249 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Email", u."Name", u."Password", u."Role", u."WalletCustomerEmail"
FROM "Users" AS u
WHERE u."Email" = @__key_0
LIMIT 2
2025-07-21 15:36:38.578 +05:30 [INF] User admin@xyz.com logged in successfully
2025-07-21 15:36:38.579 +05:30 [INF] Executing OkObjectResult, writing value of type 'BookingSystem.Models.DTOs.UserLoginResponse'.
2025-07-21 15:36:38.581 +05:30 [INF] Executed action AuthenticationController.UserLogin (booking_system) in 408.2218ms
2025-07-21 15:36:38.581 +05:30 [INF] Executed endpoint 'AuthenticationController.UserLogin (booking_system)'
2025-07-21 15:36:38.581 +05:30 [INF] HTTP POST /api/v1/Authentication responded 200 in 414.6965 ms
2025-07-21 15:36:38.582 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5136/api/v1/Authentication - 200 null application/json; charset=utf-8 433.1163ms
2025-07-21 15:38:12.089 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5136/api/Events - application/json 266
2025-07-21 15:38:12.090 +05:30 [INF] CORS policy execution failed.
2025-07-21 15:38:12.090 +05:30 [INF] Request origin http://localhost:5136 does not have permission to access the resource.
2025-07-21 15:38:12.096 +05:30 [INF] Executing endpoint 'BookingSystem.Controllers.EventsController.CreateEvent (booking_system)'
2025-07-21 15:38:12.101 +05:30 [INF] Route matched with {action = "CreateEvent", controller = "Events"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookingSystem.Models.Event]] CreateEvent(BookingSystem.Models.DTOs.EventDto) on controller BookingSystem.Controllers.EventsController (booking_system).
2025-07-21 15:38:12.127 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name"
FROM "Categories" AS c
WHERE c."Name" = @__key_0
LIMIT 2
2025-07-21 15:38:12.213 +05:30 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?', @p4='?', @p5='?' (DbType = DateTime), @p6='?', @p7='?', @p8='?' (DbType = Boolean), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Events" ("Address", "CategoryId", "City", "Context", "CreatorEmail", "Date", "Description", "Imageurl", "IsCancelled", "Price", "Ticketcount", "Title")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11)
RETURNING "Id";
2025-07-21 15:38:12.227 +05:30 [INF] Event event1 created successfully
2025-07-21 15:38:12.228 +05:30 [INF] Executing CreatedAtActionResult, writing value of type 'BookingSystem.Models.Event'.
2025-07-21 15:38:12.232 +05:30 [INF] Executed action BookingSystem.Controllers.EventsController.CreateEvent (booking_system) in 130.4464ms
2025-07-21 15:38:12.232 +05:30 [INF] Executed endpoint 'BookingSystem.Controllers.EventsController.CreateEvent (booking_system)'
2025-07-21 15:38:12.232 +05:30 [INF] HTTP POST /api/Events responded 201 in 136.7185 ms
2025-07-21 15:38:12.233 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5136/api/Events - 201 null application/json; charset=utf-8 143.8293ms
2025-07-21 15:38:31.362 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5136/api/v1/Customer/register - application/json 154
2025-07-21 15:38:31.363 +05:30 [INF] CORS policy execution failed.
2025-07-21 15:38:31.363 +05:30 [INF] Request origin http://localhost:5136 does not have permission to access the resource.
2025-07-21 15:38:31.363 +05:30 [INF] Executing endpoint 'BookingSystem.Controllers.CustomerController.RegisterCustomer (booking_system)'
2025-07-21 15:38:31.366 +05:30 [INF] Route matched with {action = "RegisterCustomer", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookingSystem.Models.Customer]] RegisterCustomer(BookingSystem.Models.DTOs.CustomerDto) on controller BookingSystem.Controllers.CustomerController (booking_system).
2025-07-21 15:38:31.388 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Email", u."Name", u."Password", u."Role", u."WalletCustomerEmail"
FROM "Users" AS u
WHERE u."Email" = @__key_0
LIMIT 2
2025-07-21 15:38:31.542 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Email", "Name", "Password", "Role", "WalletCustomerEmail")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-21 15:38:31.557 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = Int32), @p3='?', @p4='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Customers" ("Email", "Address", "Id", "Name", "PhoneNumber")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-21 15:38:31.558 +05:30 [INF] Customer customer@xyz.com registered successfully
2025-07-21 15:38:31.558 +05:30 [INF] Executing CreatedAtActionResult, writing value of type 'BookingSystem.Models.Customer'.
2025-07-21 15:38:31.560 +05:30 [INF] Executed action BookingSystem.Controllers.CustomerController.RegisterCustomer (booking_system) in 193.0568ms
2025-07-21 15:38:31.560 +05:30 [INF] Executed endpoint 'BookingSystem.Controllers.CustomerController.RegisterCustomer (booking_system)'
2025-07-21 15:38:31.560 +05:30 [INF] HTTP POST /api/v1/Customer/register responded 201 in 196.3923 ms
2025-07-21 15:38:31.560 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5136/api/v1/Customer/register - 201 null application/json; charset=utf-8 198.1283ms
2025-07-21 15:38:58.085 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5136/api/v1/Authentication - application/json 62
2025-07-21 15:38:58.086 +05:30 [INF] CORS policy execution failed.
2025-07-21 15:38:58.086 +05:30 [INF] Request origin http://localhost:5136 does not have permission to access the resource.
2025-07-21 15:38:58.086 +05:30 [INF] Executing endpoint 'AuthenticationController.UserLogin (booking_system)'
2025-07-21 15:38:58.086 +05:30 [INF] Route matched with {action = "UserLogin", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookingSystem.Models.DTOs.UserLoginResponse]] UserLogin(BookingSystem.Models.DTOs.UserLoginRequest) on controller AuthenticationController (booking_system).
2025-07-21 15:38:58.088 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Email", u."Name", u."Password", u."Role", u."WalletCustomerEmail"
FROM "Users" AS u
WHERE u."Email" = @__key_0
LIMIT 2
2025-07-21 15:38:58.248 +05:30 [INF] User customer@xyz.com logged in successfully
2025-07-21 15:38:58.248 +05:30 [INF] Executing OkObjectResult, writing value of type 'BookingSystem.Models.DTOs.UserLoginResponse'.
2025-07-21 15:38:58.248 +05:30 [INF] Executed action AuthenticationController.UserLogin (booking_system) in 161.9429ms
2025-07-21 15:38:58.248 +05:30 [INF] Executed endpoint 'AuthenticationController.UserLogin (booking_system)'
2025-07-21 15:38:58.248 +05:30 [INF] HTTP POST /api/v1/Authentication responded 200 in 162.5049 ms
2025-07-21 15:38:58.249 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5136/api/v1/Authentication - 200 null application/json; charset=utf-8 163.5085ms
2025-07-21 15:39:24.897 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5136/api/Events - null null
2025-07-21 15:39:24.902 +05:30 [INF] Executing endpoint 'BookingSystem.Controllers.EventsController.GetAllEvents (booking_system)'
2025-07-21 15:39:24.918 +05:30 [INF] Route matched with {action = "GetAllEvents", controller = "Events"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[BookingSystem.Models.Event]]] GetAllEvents() on controller BookingSystem.Controllers.EventsController (booking_system).
2025-07-21 15:39:24.989 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Address", e."CategoryId", e."City", e."Context", e."CreatorEmail", e."Date", e."Description", e."Imageurl", e."IsCancelled", e."Price", e."Ticketcount", e."Title", c."Id", c."Name"
FROM "Events" AS e
INNER JOIN "Categories" AS c ON e."CategoryId" = c."Id"
2025-07-21 15:39:24.995 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+ListWhereIterator`1[[BookingSystem.Models.Event, booking_system, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-21 15:39:24.996 +05:30 [INF] Executed action BookingSystem.Controllers.EventsController.GetAllEvents (booking_system) in 77.1595ms
2025-07-21 15:39:24.996 +05:30 [INF] Executed endpoint 'BookingSystem.Controllers.EventsController.GetAllEvents (booking_system)'
2025-07-21 15:39:24.996 +05:30 [INF] HTTP GET /api/Events responded 200 in 93.5968 ms
2025-07-21 15:39:24.996 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5136/api/Events - 200 null application/json; charset=utf-8 99.1938ms
2025-07-21 15:42:10.807 +05:30 [INF] Application is shutting down...
2025-07-21 15:42:20.558 +05:30 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-21 15:42:20.827 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2025-07-21 15:42:20.835 +05:30 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-21 15:42:20.837 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2025-07-21 15:42:20.838 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-21 15:42:20.841 +05:30 [INF] No migrations were applied. The database is already up to date.
2025-07-21 15:42:20.932 +05:30 [INF] User profile is available. Using '/Users/yugendransunder/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-07-21 15:42:20.991 +05:30 [INF] Now listening on: http://localhost:5136
2025-07-21 15:42:20.992 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 15:42:20.993 +05:30 [INF] Hosting environment: Development
2025-07-21 15:42:20.993 +05:30 [INF] Content root path: /Users/yugendransunder/Documents/Genspark-training/Genspark-Training/capstone_project/booking_system
2025-07-21 15:42:28.703 +05:30 [INF] Application is shutting down...
2025-07-21 15:42:49.763 +05:30 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-21 15:42:50.094 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2025-07-21 15:42:50.103 +05:30 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-21 15:42:50.104 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2025-07-21 15:42:50.105 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-21 15:42:50.110 +05:30 [INF] No migrations were applied. The database is already up to date.
2025-07-21 15:42:50.205 +05:30 [INF] User profile is available. Using '/Users/yugendransunder/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-07-21 15:42:50.257 +05:30 [INF] Now listening on: http://localhost:5136
2025-07-21 15:42:50.259 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 15:42:50.259 +05:30 [INF] Hosting environment: Development
2025-07-21 15:42:50.259 +05:30 [INF] Content root path: /Users/yugendransunder/Documents/Genspark-training/Genspark-Training/capstone_project/booking_system
2025-07-21 15:43:19.016 +05:30 [INF] Application is shutting down...
2025-07-21 15:43:28.159 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-21 15:43:28.609 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2025-07-21 15:43:28.619 +05:30 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-21 15:43:28.620 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2025-07-21 15:43:28.621 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-21 15:43:28.625 +05:30 [INF] No migrations were applied. The database is already up to date.
2025-07-21 15:43:28.720 +05:30 [INF] User profile is available. Using '/Users/yugendransunder/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-07-21 15:43:28.783 +05:30 [INF] Now listening on: http://localhost:5136
2025-07-21 15:43:28.784 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 15:43:28.785 +05:30 [INF] Hosting environment: Development
2025-07-21 15:43:28.785 +05:30 [INF] Content root path: /Users/yugendransunder/Documents/Genspark-training/Genspark-Training/capstone_project/booking_system
2025-07-21 15:43:32.671 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5136/api/v1/Customer/register - application/json 154
2025-07-21 15:43:32.709 +05:30 [WRN] Failed to determine the https port for redirect.
2025-07-21 15:43:32.710 +05:30 [INF] CORS policy execution failed.
2025-07-21 15:43:32.710 +05:30 [INF] Request origin http://localhost:5136 does not have permission to access the resource.
2025-07-21 15:43:32.786 +05:30 [INF] Executing endpoint 'BookingSystem.Controllers.CustomerController.RegisterCustomer (booking_system)'
2025-07-21 15:43:32.800 +05:30 [INF] Route matched with {action = "RegisterCustomer", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookingSystem.Models.Customer]] RegisterCustomer(BookingSystem.Models.DTOs.CustomerDto) on controller BookingSystem.Controllers.CustomerController (booking_system).
2025-07-21 15:43:33.182 +05:30 [INF] Executed DbCommand (17ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Email", u."Name", u."Password", u."Role", u."WalletCustomerEmail"
FROM "Users" AS u
WHERE u."Email" = @__key_0
LIMIT 2
2025-07-21 15:43:33.653 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Email", "Name", "Password", "Role", "WalletCustomerEmail")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-21 15:43:33.697 +05:30 [ERR] Failed executing DbCommand (12ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Wallets" ("CustomerEmail", "Id", "LastUpdated", balance)
VALUES (@p0, @p1, @p2, @p3);
2025-07-21 15:43:33.719 +05:30 [ERR] An exception occurred in the database while saving changes for context type 'BookingSystem.Contexts.BookingDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table "Wallets" violates foreign key constraint "FK_Wallets_Customers_CustomerEmail"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23503
    MessageText: insert or update on table "Wallets" violates foreign key constraint "FK_Wallets_Customers_CustomerEmail"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Wallets
    ConstraintName: FK_Wallets_Customers_CustomerEmail
    File: ri_triggers.c
    Line: 2610
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table "Wallets" violates foreign key constraint "FK_Wallets_Customers_CustomerEmail"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23503
    MessageText: insert or update on table "Wallets" violates foreign key constraint "FK_Wallets_Customers_CustomerEmail"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Wallets
    ConstraintName: FK_Wallets_Customers_CustomerEmail
    File: ri_triggers.c
    Line: 2610
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-07-21 15:43:33.724 +05:30 [ERR] Error occurred while registering customer with email customer@xyz.com
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table "Wallets" violates foreign key constraint "FK_Wallets_Customers_CustomerEmail"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23503
    MessageText: insert or update on table "Wallets" violates foreign key constraint "FK_Wallets_Customers_CustomerEmail"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Wallets
    ConstraintName: FK_Wallets_Customers_CustomerEmail
    File: ri_triggers.c
    Line: 2610
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BookingSystem.Repositories.Repository`2.Add(T item) in /Users/yugendransunder/Documents/Genspark-training/Genspark-Training/capstone_project/booking_system/Repositories/Repository.cs:line 17
   at BookingSystem.Services.CustomerService.RegisterCustomer(CustomerDto customerDto) in /Users/yugendransunder/Documents/Genspark-training/Genspark-Training/capstone_project/booking_system/Services/CustomerService.cs:line 46
   at BookingSystem.Controllers.CustomerController.RegisterCustomer(CustomerDto customerDto) in /Users/yugendransunder/Documents/Genspark-training/Genspark-Training/capstone_project/booking_system/Controllers/CustomerController.cs:line 27
2025-07-21 15:43:33.737 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-21 15:43:33.743 +05:30 [INF] Executed action BookingSystem.Controllers.CustomerController.RegisterCustomer (booking_system) in 939.5132ms
2025-07-21 15:43:33.748 +05:30 [INF] Executed endpoint 'BookingSystem.Controllers.CustomerController.RegisterCustomer (booking_system)'
2025-07-21 15:43:33.750 +05:30 [INF] HTTP POST /api/v1/Customer/register responded 400 in 963.5603 ms
2025-07-21 15:43:33.758 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5136/api/v1/Customer/register - 400 null text/plain; charset=utf-8 1088.5208ms
2025-07-21 15:46:59.194 +05:30 [INF] Application is shutting down...
2025-07-21 15:47:09.536 +05:30 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-21 15:47:09.860 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2025-07-21 15:47:09.869 +05:30 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-21 15:47:09.870 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2025-07-21 15:47:09.870 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-21 15:47:09.874 +05:30 [INF] No migrations were applied. The database is already up to date.
2025-07-21 15:47:09.967 +05:30 [INF] User profile is available. Using '/Users/yugendransunder/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-07-21 15:47:10.025 +05:30 [INF] Now listening on: http://localhost:5136
2025-07-21 15:47:10.027 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 15:47:10.027 +05:30 [INF] Hosting environment: Development
2025-07-21 15:47:10.027 +05:30 [INF] Content root path: /Users/yugendransunder/Documents/Genspark-training/Genspark-Training/capstone_project/booking_system
2025-07-21 15:47:22.421 +05:30 [INF] Application is shutting down...
2025-07-21 15:47:28.432 +05:30 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-21 15:47:28.719 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2025-07-21 15:47:28.726 +05:30 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-21 15:47:28.727 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
LOCK TABLE "__EFMigrationsHistory" IN ACCESS EXCLUSIVE MODE
2025-07-21 15:47:28.728 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-07-21 15:47:28.732 +05:30 [INF] No migrations were applied. The database is already up to date.
2025-07-21 15:47:28.825 +05:30 [INF] User profile is available. Using '/Users/yugendransunder/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-07-21 15:47:28.884 +05:30 [INF] Now listening on: http://localhost:5136
2025-07-21 15:47:28.886 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-07-21 15:47:28.886 +05:30 [INF] Hosting environment: Development
2025-07-21 15:47:28.886 +05:30 [INF] Content root path: /Users/yugendransunder/Documents/Genspark-training/Genspark-Training/capstone_project/booking_system
2025-07-21 15:47:59.423 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5136/api/v1/Customer/register - application/json 154
2025-07-21 15:47:59.461 +05:30 [WRN] Failed to determine the https port for redirect.
2025-07-21 15:47:59.462 +05:30 [INF] CORS policy execution failed.
2025-07-21 15:47:59.463 +05:30 [INF] Request origin http://localhost:5136 does not have permission to access the resource.
2025-07-21 15:47:59.540 +05:30 [INF] Executing endpoint 'BookingSystem.Controllers.CustomerController.RegisterCustomer (booking_system)'
2025-07-21 15:47:59.556 +05:30 [INF] Route matched with {action = "RegisterCustomer", controller = "Customer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookingSystem.Models.Customer]] RegisterCustomer(BookingSystem.Models.DTOs.CustomerDto) on controller BookingSystem.Controllers.CustomerController (booking_system).
2025-07-21 15:47:59.915 +05:30 [INF] Executed DbCommand (17ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Email", u."Name", u."Password", u."Role", u."WalletCustomerEmail"
FROM "Users" AS u
WHERE u."Email" = @__key_0
LIMIT 2
2025-07-21 15:48:00.377 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?', @p1='?', @p2='?', @p3='?', @p4='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Email", "Name", "Password", "Role", "WalletCustomerEmail")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-21 15:48:00.423 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?', @p1='?', @p2='?' (DbType = Int32), @p3='?', @p4='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Customers" ("Email", "Address", "Id", "Name", "PhoneNumber")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-07-21 15:48:00.450 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Wallets" ("CustomerEmail", "Id", "LastUpdated", balance)
VALUES (@p0, @p1, @p2, @p3);
2025-07-21 15:48:00.451 +05:30 [INF] Customer customer@xyz.com registered successfully
2025-07-21 15:48:00.460 +05:30 [INF] Executing CreatedAtActionResult, writing value of type 'BookingSystem.Models.Customer'.
2025-07-21 15:48:00.505 +05:30 [INF] Executed action BookingSystem.Controllers.CustomerController.RegisterCustomer (booking_system) in 945.2214ms
2025-07-21 15:48:00.510 +05:30 [INF] Executed endpoint 'BookingSystem.Controllers.CustomerController.RegisterCustomer (booking_system)'
2025-07-21 15:48:00.513 +05:30 [INF] HTTP POST /api/v1/Customer/register responded 201 in 972.4558 ms
2025-07-21 15:48:00.522 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5136/api/v1/Customer/register - 201 null application/json; charset=utf-8 1100.2457ms
2025-07-21 15:48:14.102 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5136/api/v1/Authentication - application/json 62
2025-07-21 15:48:14.105 +05:30 [INF] CORS policy execution failed.
2025-07-21 15:48:14.105 +05:30 [INF] Request origin http://localhost:5136 does not have permission to access the resource.
2025-07-21 15:48:14.109 +05:30 [INF] Executing endpoint 'AuthenticationController.UserLogin (booking_system)'
2025-07-21 15:48:14.114 +05:30 [INF] Route matched with {action = "UserLogin", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookingSystem.Models.DTOs.UserLoginResponse]] UserLogin(BookingSystem.Models.DTOs.UserLoginRequest) on controller AuthenticationController (booking_system).
2025-07-21 15:48:14.180 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Email", u."Name", u."Password", u."Role", u."WalletCustomerEmail"
FROM "Users" AS u
WHERE u."Email" = @__key_0
LIMIT 2
2025-07-21 15:48:14.508 +05:30 [INF] User customer@xyz.com logged in successfully
2025-07-21 15:48:14.509 +05:30 [INF] Executing OkObjectResult, writing value of type 'BookingSystem.Models.DTOs.UserLoginResponse'.
2025-07-21 15:48:14.511 +05:30 [INF] Executed action AuthenticationController.UserLogin (booking_system) in 393.3169ms
2025-07-21 15:48:14.511 +05:30 [INF] Executed endpoint 'AuthenticationController.UserLogin (booking_system)'
2025-07-21 15:48:14.511 +05:30 [INF] HTTP POST /api/v1/Authentication responded 200 in 402.4237 ms
2025-07-21 15:48:14.512 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5136/api/v1/Authentication - 200 null application/json; charset=utf-8 409.9112ms
2025-07-21 15:48:43.174 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:5136/api/Wallet/add - application/json 50
2025-07-21 15:48:43.175 +05:30 [INF] CORS policy execution failed.
2025-07-21 15:48:43.175 +05:30 [INF] Request origin http://localhost:5136 does not have permission to access the resource.
2025-07-21 15:48:43.189 +05:30 [INF] Executing endpoint 'BookingSystem.Controllers.WalletController.AddFunds (booking_system)'
2025-07-21 15:48:43.198 +05:30 [INF] Route matched with {action = "AddFunds", controller = "Wallet"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookingSystem.Models.Wallet]] AddFunds(BookingSystem.Models.DTOs.WalletTransactionDto) on controller BookingSystem.Controllers.WalletController (booking_system).
2025-07-21 15:48:43.270 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT w."CustomerEmail", w."Id", w."LastUpdated", w.balance, c."Email", c."Address", c."Id", c."Name", c."PhoneNumber"
FROM "Wallets" AS w
INNER JOIN "Customers" AS c ON w."CustomerEmail" = c."Email"
WHERE w."CustomerEmail" = @__key_0
LIMIT 2
2025-07-21 15:48:43.277 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT w."CustomerEmail", w."Id", w."LastUpdated", w.balance, c."Email", c."Address", c."Id", c."Name", c."PhoneNumber"
FROM "Wallets" AS w
INNER JOIN "Customers" AS c ON w."CustomerEmail" = c."Email"
WHERE w."CustomerEmail" = @__key_0
LIMIT 2
2025-07-21 15:48:43.286 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?', @p0='?' (DbType = DateTime), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Wallets" SET "LastUpdated" = @p0, balance = @p1
WHERE "CustomerEmail" = @p2;
2025-07-21 15:48:43.287 +05:30 [INF] Executing OkObjectResult, writing value of type 'BookingSystem.Models.Wallet'.
2025-07-21 15:48:43.287 +05:30 [INF] Executed action BookingSystem.Controllers.WalletController.AddFunds (booking_system) in 89.1025ms
2025-07-21 15:48:43.287 +05:30 [INF] Executed endpoint 'BookingSystem.Controllers.WalletController.AddFunds (booking_system)'
2025-07-21 15:48:43.287 +05:30 [INF] HTTP PUT /api/Wallet/add responded 200 in 106.4650 ms
2025-07-21 15:48:43.287 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:5136/api/Wallet/add - 200 null application/json; charset=utf-8 113.4108ms
2025-07-21 15:49:05.390 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5136/api/Wallet/customer@xyz.com - null null
2025-07-21 15:49:05.398 +05:30 [INF] Executing endpoint 'BookingSystem.Controllers.WalletController.GetWalletByUserId (booking_system)'
2025-07-21 15:49:05.417 +05:30 [INF] Route matched with {action = "GetWalletByUserId", controller = "Wallet"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookingSystem.Models.Wallet]] GetWalletByUserId(System.String) on controller BookingSystem.Controllers.WalletController (booking_system).
2025-07-21 15:49:05.421 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT w."CustomerEmail", w."Id", w."LastUpdated", w.balance, c."Email", c."Address", c."Id", c."Name", c."PhoneNumber"
FROM "Wallets" AS w
INNER JOIN "Customers" AS c ON w."CustomerEmail" = c."Email"
WHERE w."CustomerEmail" = @__key_0
LIMIT 2
2025-07-21 15:49:05.423 +05:30 [INF] Executing OkObjectResult, writing value of type 'BookingSystem.Models.Wallet'.
2025-07-21 15:49:05.423 +05:30 [INF] Executed action BookingSystem.Controllers.WalletController.GetWalletByUserId (booking_system) in 5.9503ms
2025-07-21 15:49:05.423 +05:30 [INF] Executed endpoint 'BookingSystem.Controllers.WalletController.GetWalletByUserId (booking_system)'
2025-07-21 15:49:05.423 +05:30 [INF] HTTP GET /api/Wallet/customer@xyz.com responded 200 in 25.3121 ms
2025-07-21 15:49:05.424 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5136/api/Wallet/customer@xyz.com - 200 null application/json; charset=utf-8 33.8887ms
2025-07-21 15:49:20.649 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5136/api/v1/Ticket/book - application/json 65
2025-07-21 15:49:20.650 +05:30 [INF] CORS policy execution failed.
2025-07-21 15:49:20.650 +05:30 [INF] Request origin http://localhost:5136 does not have permission to access the resource.
2025-07-21 15:49:20.652 +05:30 [INF] Executing endpoint 'BookingSystem.Controllers.TicketController.BookTicket (booking_system)'
2025-07-21 15:49:20.656 +05:30 [INF] Route matched with {action = "BookTicket", controller = "Ticket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookingSystem.Models.Ticket]] BookTicket(BookingSystem.Models.DTOs.TicketDto) on controller BookingSystem.Controllers.TicketController (booking_system).
2025-07-21 15:49:20.680 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Address", e."CategoryId", e."City", e."Context", e."CreatorEmail", e."Date", e."Description", e."Imageurl", e."IsCancelled", e."Price", e."Ticketcount", e."Title"
FROM "Events" AS e
WHERE e."Title" = @__key_0
LIMIT 2
2025-07-21 15:49:20.714 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT w."CustomerEmail", w."Id", w."LastUpdated", w.balance, c."Email", c."Address", c."Id", c."Name", c."PhoneNumber"
FROM "Wallets" AS w
INNER JOIN "Customers" AS c ON w."CustomerEmail" = c."Email"
WHERE w."CustomerEmail" = @__key_0
LIMIT 2
2025-07-21 15:49:20.716 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT w."CustomerEmail", w."Id", w."LastUpdated", w.balance, c."Email", c."Address", c."Id", c."Name", c."PhoneNumber"
FROM "Wallets" AS w
INNER JOIN "Customers" AS c ON w."CustomerEmail" = c."Email"
WHERE w."CustomerEmail" = @__key_0
LIMIT 2
2025-07-21 15:49:20.727 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?', @p0='?' (DbType = DateTime), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Wallets" SET "LastUpdated" = @p0, balance = @p1
WHERE "CustomerEmail" = @p2;
2025-07-21 15:49:20.729 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Address", e."CategoryId", e."City", e."Context", e."CreatorEmail", e."Date", e."Description", e."Imageurl", e."IsCancelled", e."Price", e."Ticketcount", e."Title"
FROM "Events" AS e
WHERE e."Title" = @__key_0
LIMIT 2
2025-07-21 15:49:20.731 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Events" SET "Ticketcount" = @p0
WHERE "Id" = @p1;
2025-07-21 15:49:20.772 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = Int32), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Tickets" ("BookingDate", "CustomerEmail", "EventId", "IsCancelled", "Quantity", "Total")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5)
RETURNING "Id";
2025-07-21 15:49:20.785 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Address", e."CategoryId", e."City", e."Context", e."CreatorEmail", e."Date", e."Description", e."Imageurl", e."IsCancelled", e."Price", e."Ticketcount", e."Title"
FROM "Events" AS e
WHERE e."Title" = @__key_0
LIMIT 2
2025-07-21 15:49:21.216 +05:30 [INF] Executing FileContentResult, sending file with download name 'Ticket_1.pdf' ...
2025-07-21 15:49:21.234 +05:30 [INF] Executed action BookingSystem.Controllers.TicketController.BookTicket (booking_system) in 578.1441ms
2025-07-21 15:49:21.234 +05:30 [INF] Executed endpoint 'BookingSystem.Controllers.TicketController.BookTicket (booking_system)'
2025-07-21 15:49:21.235 +05:30 [INF] HTTP POST /api/v1/Ticket/book responded 200 in 582.0779 ms
2025-07-21 15:49:21.235 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5136/api/v1/Ticket/book - 200 72788 application/pdf 585.3541ms
2025-07-21 15:49:28.800 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5136/api/Wallet/customer@xyz.com - null null
2025-07-21 15:49:28.801 +05:30 [INF] Executing endpoint 'BookingSystem.Controllers.WalletController.GetWalletByUserId (booking_system)'
2025-07-21 15:49:28.802 +05:30 [INF] Route matched with {action = "GetWalletByUserId", controller = "Wallet"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookingSystem.Models.Wallet]] GetWalletByUserId(System.String) on controller BookingSystem.Controllers.WalletController (booking_system).
2025-07-21 15:49:28.805 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT w."CustomerEmail", w."Id", w."LastUpdated", w.balance, c."Email", c."Address", c."Id", c."Name", c."PhoneNumber"
FROM "Wallets" AS w
INNER JOIN "Customers" AS c ON w."CustomerEmail" = c."Email"
WHERE w."CustomerEmail" = @__key_0
LIMIT 2
2025-07-21 15:49:28.806 +05:30 [INF] Executing OkObjectResult, writing value of type 'BookingSystem.Models.Wallet'.
2025-07-21 15:49:28.806 +05:30 [INF] Executed action BookingSystem.Controllers.WalletController.GetWalletByUserId (booking_system) in 4.212ms
2025-07-21 15:49:28.806 +05:30 [INF] Executed endpoint 'BookingSystem.Controllers.WalletController.GetWalletByUserId (booking_system)'
2025-07-21 15:49:28.806 +05:30 [INF] HTTP GET /api/Wallet/customer@xyz.com responded 200 in 4.8585 ms
2025-07-21 15:49:28.807 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5136/api/Wallet/customer@xyz.com - 200 null application/json; charset=utf-8 6.3082ms
2025-07-21 15:49:43.794 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5136/api/v1/Ticket/book - application/json 65
2025-07-21 15:49:43.795 +05:30 [INF] CORS policy execution failed.
2025-07-21 15:49:43.795 +05:30 [INF] Request origin http://localhost:5136 does not have permission to access the resource.
2025-07-21 15:49:43.796 +05:30 [INF] Executing endpoint 'BookingSystem.Controllers.TicketController.BookTicket (booking_system)'
2025-07-21 15:49:43.796 +05:30 [INF] Route matched with {action = "BookTicket", controller = "Ticket"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookingSystem.Models.Ticket]] BookTicket(BookingSystem.Models.DTOs.TicketDto) on controller BookingSystem.Controllers.TicketController (booking_system).
2025-07-21 15:49:43.799 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Address", e."CategoryId", e."City", e."Context", e."CreatorEmail", e."Date", e."Description", e."Imageurl", e."IsCancelled", e."Price", e."Ticketcount", e."Title"
FROM "Events" AS e
WHERE e."Title" = @__key_0
LIMIT 2
2025-07-21 15:49:43.801 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT w."CustomerEmail", w."Id", w."LastUpdated", w.balance, c."Email", c."Address", c."Id", c."Name", c."PhoneNumber"
FROM "Wallets" AS w
INNER JOIN "Customers" AS c ON w."CustomerEmail" = c."Email"
WHERE w."CustomerEmail" = @__key_0
LIMIT 2
2025-07-21 15:49:43.801 +05:30 [ERR] Error booking ticket for event event1
System.Exception: Insufficient wallet balance.
   at BookingSystem.Services.WalletService.DeductAmountFromWallet(String email, Int32 amount) in /Users/yugendransunder/Documents/Genspark-training/Genspark-Training/capstone_project/booking_system/Services/WalletService.cs:line 44
   at BookingSystem.Services.TicketService.BookTicket(TicketDto ticketDto) in /Users/yugendransunder/Documents/Genspark-training/Genspark-Training/capstone_project/booking_system/Services/TicketService.cs:line 46
   at BookingSystem.Controllers.TicketController.BookTicket(TicketDto ticketDto) in /Users/yugendransunder/Documents/Genspark-training/Genspark-Training/capstone_project/booking_system/Controllers/TicketController.cs:line 37
2025-07-21 15:49:43.815 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-07-21 15:49:43.816 +05:30 [INF] Executed action BookingSystem.Controllers.TicketController.BookTicket (booking_system) in 19.6549ms
2025-07-21 15:49:43.816 +05:30 [INF] Executed endpoint 'BookingSystem.Controllers.TicketController.BookTicket (booking_system)'
2025-07-21 15:49:43.816 +05:30 [INF] HTTP POST /api/v1/Ticket/book responded 400 in 20.1798 ms
2025-07-21 15:49:43.816 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5136/api/v1/Ticket/book - 400 null text/plain; charset=utf-8 22.4028ms
2025-07-21 15:50:11.679 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5136/api/v1/Authentication - application/json 59
2025-07-21 15:50:11.680 +05:30 [INF] CORS policy execution failed.
2025-07-21 15:50:11.680 +05:30 [INF] Request origin http://localhost:5136 does not have permission to access the resource.
2025-07-21 15:50:11.680 +05:30 [INF] Executing endpoint 'AuthenticationController.UserLogin (booking_system)'
2025-07-21 15:50:11.680 +05:30 [INF] Route matched with {action = "UserLogin", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookingSystem.Models.DTOs.UserLoginResponse]] UserLogin(BookingSystem.Models.DTOs.UserLoginRequest) on controller AuthenticationController (booking_system).
2025-07-21 15:50:11.682 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Email", u."Name", u."Password", u."Role", u."WalletCustomerEmail"
FROM "Users" AS u
WHERE u."Email" = @__key_0
LIMIT 2
2025-07-21 15:50:11.822 +05:30 [INF] User admin@xyz.com logged in successfully
2025-07-21 15:50:11.823 +05:30 [INF] Executing OkObjectResult, writing value of type 'BookingSystem.Models.DTOs.UserLoginResponse'.
2025-07-21 15:50:11.823 +05:30 [INF] Executed action AuthenticationController.UserLogin (booking_system) in 142.5738ms
2025-07-21 15:50:11.823 +05:30 [INF] Executed endpoint 'AuthenticationController.UserLogin (booking_system)'
2025-07-21 15:50:11.823 +05:30 [INF] HTTP POST /api/v1/Authentication responded 200 in 143.0372 ms
2025-07-21 15:50:11.823 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5136/api/v1/Authentication - 200 null application/json; charset=utf-8 143.9904ms
2025-07-21 15:50:40.813 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5136/api/v1/Authentication - application/json 59
2025-07-21 15:50:40.813 +05:30 [INF] CORS policy execution failed.
2025-07-21 15:50:40.813 +05:30 [INF] Request origin http://localhost:5136 does not have permission to access the resource.
2025-07-21 15:50:40.814 +05:30 [INF] Executing endpoint 'AuthenticationController.UserLogin (booking_system)'
2025-07-21 15:50:40.814 +05:30 [INF] Route matched with {action = "UserLogin", controller = "Authentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookingSystem.Models.DTOs.UserLoginResponse]] UserLogin(BookingSystem.Models.DTOs.UserLoginRequest) on controller AuthenticationController (booking_system).
2025-07-21 15:50:40.816 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Email", u."Name", u."Password", u."Role", u."WalletCustomerEmail"
FROM "Users" AS u
WHERE u."Email" = @__key_0
LIMIT 2
2025-07-21 15:50:40.955 +05:30 [INF] User admin@xyz.com logged in successfully
2025-07-21 15:50:40.955 +05:30 [INF] Executing OkObjectResult, writing value of type 'BookingSystem.Models.DTOs.UserLoginResponse'.
2025-07-21 15:50:40.955 +05:30 [INF] Executed action AuthenticationController.UserLogin (booking_system) in 141.0703ms
2025-07-21 15:50:40.955 +05:30 [INF] Executed endpoint 'AuthenticationController.UserLogin (booking_system)'
2025-07-21 15:50:40.955 +05:30 [INF] HTTP POST /api/v1/Authentication responded 200 in 141.5810 ms
2025-07-21 15:50:40.956 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5136/api/v1/Authentication - 200 null application/json; charset=utf-8 142.4833ms
2025-07-21 15:51:13.038 +05:30 [INF] Request starting HTTP/1.1 DELETE http://localhost:5136/api/Events/event1 - null null
2025-07-21 15:51:13.038 +05:30 [INF] CORS policy execution failed.
2025-07-21 15:51:13.038 +05:30 [INF] Request origin http://localhost:5136 does not have permission to access the resource.
2025-07-21 15:51:13.039 +05:30 [INF] Executing endpoint 'BookingSystem.Controllers.EventsController.DeleteEvent (booking_system)'
2025-07-21 15:51:13.042 +05:30 [INF] Route matched with {action = "DeleteEvent", controller = "Events"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookingSystem.Models.Event]] DeleteEvent(System.String) on controller BookingSystem.Controllers.EventsController (booking_system).
2025-07-21 15:51:13.060 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Address", e."CategoryId", e."City", e."Context", e."CreatorEmail", e."Date", e."Description", e."Imageurl", e."IsCancelled", e."Price", e."Ticketcount", e."Title"
FROM "Events" AS e
WHERE e."Title" = @__key_0
LIMIT 2
2025-07-21 15:51:13.065 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."Address", e."CategoryId", e."City", e."Context", e."CreatorEmail", e."Date", e."Description", e."Imageurl", e."IsCancelled", e."Price", e."Ticketcount", e."Title"
FROM "Events" AS e
WHERE e."Title" = @__key_0
LIMIT 2
2025-07-21 15:51:13.067 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Events" SET "IsCancelled" = @p0
WHERE "Id" = @p1;
2025-07-21 15:51:13.099 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Tickets" AS t
2025-07-21 15:51:13.113 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BookingDate", t."CustomerEmail", t."EventId", t."IsCancelled", t."Quantity", t."Total", e."Id", e."Address", e."CategoryId", e."City", e."Context", e."CreatorEmail", e."Date", e."Description", e."Imageurl", e."IsCancelled", e."Price", e."Ticketcount", e."Title"
FROM "Tickets" AS t
INNER JOIN "Events" AS e ON t."EventId" = e."Id"
2025-07-21 15:51:13.115 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT w."CustomerEmail", w."Id", w."LastUpdated", w.balance, c."Email", c."Address", c."Id", c."Name", c."PhoneNumber"
FROM "Wallets" AS w
INNER JOIN "Customers" AS c ON w."CustomerEmail" = c."Email"
WHERE w."CustomerEmail" = @__key_0
LIMIT 2
2025-07-21 15:51:13.117 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT w."CustomerEmail", w."Id", w."LastUpdated", w.balance, c."Email", c."Address", c."Id", c."Name", c."PhoneNumber"
FROM "Wallets" AS w
INNER JOIN "Customers" AS c ON w."CustomerEmail" = c."Email"
WHERE w."CustomerEmail" = @__key_0
LIMIT 2
2025-07-21 15:51:13.118 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='?', @p0='?' (DbType = DateTime), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Wallets" SET "LastUpdated" = @p0, balance = @p1
WHERE "CustomerEmail" = @p2;
2025-07-21 15:51:13.126 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BookingDate", t."CustomerEmail", t."EventId", t."IsCancelled", t."Quantity", t."Total"
FROM "Tickets" AS t
WHERE t."Id" = @__key_0
LIMIT 2
2025-07-21 15:51:13.128 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Tickets" SET "IsCancelled" = @p0
WHERE "Id" = @p1;
2025-07-21 15:51:13.128 +05:30 [INF] Executing OkObjectResult, writing value of type 'BookingSystem.Models.Event'.
2025-07-21 15:51:13.131 +05:30 [INF] Executed action BookingSystem.Controllers.EventsController.DeleteEvent (booking_system) in 88.9381ms
2025-07-21 15:51:13.131 +05:30 [INF] Executed endpoint 'BookingSystem.Controllers.EventsController.DeleteEvent (booking_system)'
2025-07-21 15:51:13.132 +05:30 [INF] HTTP DELETE /api/Events/event1 responded 200 in 92.7097 ms
2025-07-21 15:51:13.132 +05:30 [INF] Request finished HTTP/1.1 DELETE http://localhost:5136/api/Events/event1 - 200 null application/json; charset=utf-8 93.665ms
